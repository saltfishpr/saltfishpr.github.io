---
title: Go 代码整洁之道
date: 2021-12-23T01:56:06+08:00
author: Salt Fish
tags: ["go"]
categories: ["Read"]

draft: true
---

<!--more-->

如果团队中的每个人都能轻松理解代码，代码就是整洁的。整洁的代码可以由非原作者的开发人员阅读和扩展。可理解性带来了可读性、可变性、可扩展性和可维护性。

## 一般规则

1. 遵循标准惯例。
2. 保持简单的愚蠢。越简单越好。尽可能降低复杂性。
3. 童子军规则。让营地比你发现的更干净。
4. 总是找到根本原因。始终寻找问题的根本原因。

## 设计规则

1. 将可配置数据放在较高级别的位置。
2. 与 if/else 或 switch/case 相比，尽可能选择多态。
3. 分离多线程代码。
4. 防止过度配置。
5. 使用依赖注入。
6. 遵循德米特定律。类应该只知道它的直接依赖项。

## 可理解性提示

1. 始终如一。如果你以某种方式做某事，用同样的方式做所有相似的事情。
2. 使用解释变量。
3. 封装边界条件。边界条件很难跟踪。把他们的处理放在一个地方。
4. 与基本类型相比，更喜欢专用值对象。
5. 避免逻辑依赖。不要编写依赖于同一类中的其他东西才能正常工作的函数。
6. 避免使用否定条件。

## 命名规则

1. 选择有描述性的、明确的名字。
2. 做出有意义的区分。
3. 使用可发音的名字。
4. 使用可搜索的名字。
5. 用命名常量替换魔鬼数字。
6. 避免编码。不要附加前缀或类型信息。

## 函数规则

1. 小。
2. 只做一件事。
3. 使用描述性的函数名。
4. 更少的参数。
5. 没有副作用。
6. 不要使用标志参数。将函数拆分为几个独立的函数，这些函数可以从客户端调用，而无需标志。

## 注释规则

1. 总是试着用代码来解释自己。
2. 不要多余。
3. 不要添加明显的噪音。
4. 不要使用右括号注释。
5. 不要注释掉代码。删掉它。
6. 用作解释意图。
7. 用作代码澄清。
8. 用作后果警告。

## 源代码结构

1. 垂直分离概念。
2. 相关代码应垂直密集显示。
3. 在使用前声明变量。
4. 依赖的函数应该位置相近的。
5. 相似的函数应该位置相近的
6. 将函数向下放置。
7. 保持简短。
8. 不要使用水平对齐。
9. 使用空白来关联相关的事物，并将弱相关的事物分离。
10. 不要破坏缩进。

## 对象和数据结构

1. 隐藏内部结构。
2. 多用数据结构。
3. 避免混合结构（半对象半数据）。
4. 应该是小的。
5. 做一件事。
6. 实例变量数量少。
7. 基类不应该知道它们的派生类。
8. 拥有多个函数比向函数传递一些标识码来选择行为要好。
9. 与静态方法相比，多用非静态方法。

## 测试

1. 每个测试一个断言。
2. 可读性。
3. 快。
4. 独立的。
5. 可重复。

## 代码味道

1. 僵硬。软件很难更改。一个小的变化会导致一系列后续的变化。
2. 脆弱。由于一次更改，该软件在许多地方都会中断。
3. 无法移动。您不能在其他项目中重用部分代码，因为这涉及到风险和高工作量。
4. 不必要的复杂性。
5. 不必要的重复。
6. 不透明。代码很难理解。
